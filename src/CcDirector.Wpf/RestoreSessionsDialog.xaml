<Window x:Class="CcDirector.Wpf.RestoreSessionsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Restore Sessions"
        Width="460" SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#252526">

    <Grid Margin="20">
        <!-- State 1: Pre-restore session list -->
        <StackPanel x:Name="PreRestorePanel">
            <TextBlock x:Name="HeaderText"
                       Foreground="#CCCCCC"
                       FontSize="14"
                       TextWrapping="Wrap"
                       Margin="0,0,0,12" />

            <ItemsControl x:Name="SessionListControl"
                          Margin="0,0,0,12">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Foreground="#AAAAAA"
                                   FontSize="12"
                                   Margin="12,2,0,2">
                            <Run Text="*  " /><Run Text="{Binding Mode=OneTime}" />
                        </TextBlock>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <CheckBox x:Name="ChkStartFresh"
                      Content="Start all sessions fresh (no resume)"
                      Foreground="#CCCCCC"
                      FontSize="12"
                      Margin="0,0,0,12" />

            <TextBlock Text="Resumable sessions will continue their previous Claude conversation."
                       Foreground="#888888"
                       FontSize="11"
                       TextWrapping="Wrap"
                       Margin="0,0,0,16" />

            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <Button x:Name="BtnContinue"
                        Content="Continue"
                        Width="100"
                        Click="BtnContinue_Click"
                        Background="#007ACC" Foreground="White"
                        BorderThickness="0" Margin="0,0,8,0"
                        Height="28" Cursor="Hand"
                        IsDefault="True" />
                <Button x:Name="BtnSkip"
                        Content="Skip All"
                        Width="80"
                        Click="BtnSkip_Click"
                        Background="#3C3C3C" Foreground="#CCCCCC"
                        BorderThickness="0"
                        Height="28" Cursor="Hand"
                        IsCancel="True" />
            </StackPanel>
        </StackPanel>

        <!-- State 2/3: Progress panel -->
        <StackPanel x:Name="ProgressPanel"
                    Visibility="Collapsed">
            <TextBlock x:Name="ProgressStatusText"
                       Foreground="#CCCCCC"
                       FontSize="14"
                       TextWrapping="Wrap"
                       Margin="0,0,0,12" />

            <ProgressBar x:Name="ProgressBar"
                         Height="4"
                         Minimum="0" Maximum="100"
                         Value="0"
                         Background="#3C3C3C"
                         Foreground="#007ACC"
                         Margin="0,0,0,16" />

            <ItemsControl x:Name="ProgressListControl"
                          Margin="0,0,0,16">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="4,2,0,2">
                            <TextBlock Text="{Binding StatusIndicator}"
                                       FontFamily="Consolas"
                                       FontSize="12"
                                       Foreground="{Binding StatusColor}"
                                       Width="32" />
                            <TextBlock Text="{Binding DisplayName}"
                                       FontSize="12"
                                       Foreground="#AAAAAA" />
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <StackPanel x:Name="DoneButtonPanel"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Visibility="Collapsed">
                <Button x:Name="BtnDone"
                        Content="Done"
                        Width="80"
                        Click="BtnDone_Click"
                        Background="#007ACC" Foreground="White"
                        BorderThickness="0"
                        Height="28" Cursor="Hand"
                        IsDefault="True" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
