<Window x:Class="CcDirector.Wpf.CloseDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="CC Director"
        Width="400" SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#252526">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Warning message -->
        <TextBlock Grid.Row="0"
                   x:Name="MessageText"
                   Foreground="#CCCCCC"
                   FontSize="14"
                   TextWrapping="Wrap"
                   Margin="0,0,0,12" />

        <!-- Session list (shows working session names) -->
        <ItemsControl Grid.Row="1"
                      x:Name="SessionListControl"
                      Margin="0,0,0,16">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}"
                               Foreground="#AAAAAA"
                               FontSize="12"
                               Margin="12,2,0,2" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <!-- Progress panel (hidden initially, shown during shutdown) -->
        <StackPanel Grid.Row="2"
                    x:Name="ProgressPanel"
                    Visibility="Collapsed"
                    Margin="0,0,0,16">
            <TextBlock x:Name="ProgressText"
                       Text="Shutting down sessions..."
                       Foreground="#CCCCCC"
                       FontSize="13"
                       Margin="0,0,0,8" />
            <ProgressBar x:Name="ProgressBar"
                         Height="4"
                         IsIndeterminate="True"
                         Background="#3C3C3C"
                         Foreground="#007ACC" />
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="3"
                    x:Name="ButtonPanel"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right">
            <Button x:Name="OkButton"
                    Content="Close Sessions"
                    Width="110"
                    Click="BtnOk_Click"
                    Background="#007ACC" Foreground="White"
                    BorderThickness="0" Margin="0,0,8,0"
                    Height="28" Cursor="Hand"
                    IsDefault="True" />
            <Button x:Name="CancelButton"
                    Content="Cancel"
                    Width="80"
                    Click="BtnCancel_Click"
                    Background="#3C3C3C" Foreground="#CCCCCC"
                    BorderThickness="0"
                    Height="28" Cursor="Hand"
                    IsCancel="True" />
        </StackPanel>
    </Grid>
</Window>
